# Search

Service provides 2 types of search: instant (typeahead) and full search.

<aside class="warning">
There is a response limit: a response can contain no more than ten thousand items, even if the request found more products
</aside>

## Instant search

```javascript
<%= config[:js_sdk_name] %>("suggest", {search_query: "To be or not to be"}, function(response) {
  // the functionality of rendering a block of instant search
}, function(error) {
  // when something went wrong
});
```
```swift
// Instant search
sdk.suggest(query: "ipho") { searchResult in
  print("Suggest callback")
}

/**

Search for merchants in locations.

To exclude merchants from the search results, use `excludedMerchants`.

excludedMerchants - an array of merchants to be excluded from the search results.

locations - locations where the search for merchants occurs.
**/

sdk?.search(
  query: "search-query",
  locations: "location",
  excludedMerchants: ["excluded-merchant"]
) { result in
    switch result {
    case .success(let response):
      print(response.productsTotal)
    case .failure(let error):
      print(error.description)
  }
}

sdk?.suggest(
  query: "search-query",
  locations: "location",
  excludedMerchants: ["excluded-merchant"]
) { result in
    switch result {
    case .success(let response):
      print(response.productsTotal)
    case .failure(let error):
      print(error.description)
  }
}

/**

Brand exclusion

To exclude brands from the search results, use `excludedBrands`.

excludedBrands â€“ an array of brand names that should be excluded from search results.

**/

sdk?.search(
    query: "powder bronzer",
    excludedBrands: ["dior", "estee lauder"]
) { result in
    switch result {
    case .success(let response):
        print(response.productsTotal)
    case .failure(let error):
        print(error.description)
    }
}

sdk?.suggest(
    query: "powder bronzer",
    excludedBrands: ["dior", "estee lauder"]
) { result in
    switch result {
    case .success(let response):
        print(response.productsTotal)
    case .failure(let error):
        print(error.description)
    }
}

```
```java
//Instant search
SearchParams params = new SearchParams();
params.put(SearchParams.Parameter.LOCATIONS, "location");
<%= config[:android_sdk_package_name]%>.search("SEARCH_QUERY", SearchParams.TYPE.INSTANT, params, new Api.OnApiCallbackListener() {
    @Override
    public void onSuccess(JSONObject response) {
        Log.i(TAG, "Search response: " + response.toString());
    }
});
//Search blank request
<%= config[:android_sdk_package_name]%>.search_blank(new Api.OnApiCallbackListener() {
    @Override
    public void onSuccess(JSONObject response) {
        Log.i(T.TAG, "Search response: " + response.toString());
    }
});
```
```kotlin
//Instant search
sdk.searchManager.searchInstant("SEARCH_QUERY", "locations", { searchInstantResponse ->
    Log.i(TAG, "Search instant response: $searchInstantResponse")
})
//Search blank request
sdk.searchManager.searchBlank({ searchBlankResponse ->
    Log.i(TAG, "Search blank response: $searchBlankResponse")
})

/**

Brand exclusion

query - search query value
excludedBrands - list of brands to be excluded
onSearchInstant - callback that is triggered when the search is completed

**/

sdk.searchManager.searchInstant(
  query = "powder bronzer",
  excludedBrands = listOf("dior", "estee lauder"),
  nSearchInstant = {
    Log.d("INSTANT SEARCH EXCLUDE BRANDS", it.productsTotal.toString())
  }
)
```
```jsx
const type = 'instant_search';
let search_query = 'your_search_text';
sdk.search({
  type: type,
  search_query: search_query,
  // other params
})
  .then((res) => {
    console.log(res);
  })
  .catch((error) => {
    console.log(error);
  });

// Blank request search
sdk.searchBlank()
// The request is sent to the endpoint 'search/blank'.
.then((res) => {
  console.log(res);
})
.catch((error) => {
  console.log(error);
});
```

### HTTP Request

// No implementation is needed in HTTP

### Query Parameters

| Parameter           | Required | Description                                                                                                                                                                                                                                                                                     |
|---------------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| did                 | true     | Device ID. You get it from `init` method in SDK.                                                                                                                                                                                                                                                |
| shop_id             | true     | Your API key.                                                                                                                                                                                                                                                                                   |
| sid                 | true     | Temporary user session ID.                                                                                                                                                                                                                                                                      |
| type                | true     | In this case: "instant_search".                                                                                                                                                                                                                                                                 |
| search_query        | true     | Search query.                                                                                                                                                                                                                                                                                   |
| locations           | false    | Comma separated list of locations IDs.                                                                                                                                                                                                                                                          |
| search_scope        | false    | The whitelist of parameters separated by commas. There are two types: common parameters and subparameters for books. If empty, all common parameters are considered included by default. If there are no book subparameters in the request, the search of book parameters won't be initialized. |
| excluded_merchants* | false    | A comma-separated list of merchants. Products from these merchants will be excluded from the search results                                                                                                                                                                                     |
| collapse            | false    | When set to `false`, products with the same `group_id` will not be collapsed into a single entry and will appear as separate items in the search results.                                                                                                                                       |                    |          |                                                                                                                                                                                                                                                                                                 |
| excluded_brands     | false    | A list of brands in lowercase, separated by commas                                                                                                                                                                                                                                              |

<aside class="warning">

<p></p>
<p>*<code>excluded_merchants</code></p>
<p>The <code>excluded_merchants</code> parameter works only in conjunction with the <code>merchants</code> parameter within the <code>locations</code> field.</p>
<p>Note that if a product is associated with multiple merchants, the list of merchants in the <code>excluded_merchants</code> parameter must precisely match the list of merchants for that product. Otherwise, the parameter will not work.</p>
<p>The connection between the <code>merchants</code> and <code>excluded_merchants</code> parameters exists because a whitelist of merchants is created based on the <code>merchants</code> parameter within the <code>locations</code> field.</p>
<p>The whitelist of merchants is populated by the content of the <code>merchants</code> parameter. If this parameter is not provided, all merchants for the product will be included in the whitelist by default.</p>
<p>The <code>excluded_merchants</code> parameter then excludes merchants from this whitelist.</p>

<p></p>
<p>*<code>excluded_brands</code></p>
<p>When uploading a product, the JSON must include the <code>brand</code> field.</p>
<p>On the backend, the value from the <code>brand</code> field is automatically converted to lowercase using <code>brand_downcase</code>.</p>
<p>Therefore, brands in <code>excluded_brands</code> must be written in lowercase.</p>
<p>Be aware that brand exclusion will not work if the <code>brand</code> field was not provided in the JSON when uploading the product.</p>

</aside>

### Search_scope common parameters and the books subparameters

| Common Parameter | Description      |
|------------------|------------------|
| params           | Parameters names |
| brand            | Brand text       |
| type             | Type prefix      |
| model            | Model            |
| categories       | Category names   |
| name             | Name             |


| Books Parameter | Description           |
|-----------------|-----------------------|
| author          | Book author downcased |
| publisher       | Publisher             |
| illustrator     | Illustration text     |
| editor          | Editor                |
| series          | Series                |



### API response
| Name                   | Type   | Description                                                                                                                                                                                           |
|:-----------------------|:-------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| search_query           | string | Search query                                                                                                                                                                                          |
| categories             | array  | Array with information about categories. Each object has the following properties:                                                                                                                    |
|                        |        | * id â€“ category id (string)                                                                                                                                                                           |
|                        |        | * name â€“ category name (string)                                                                                                                                                                       |
|                        |        | * url â€“ category url (string)                                                                                                                                                                         |
|                        |        | * count â€“ count of products in category (number)                                                                                                                                                      |
| queries                |        | Objects with the found items:                                                                                                                                                                         |
|                        |        | * The key is the index number of the item found through the search, and the value is an object containing the following properties:                                                                   |
|                        |        | - key: name, value: the name of the search item (string)                                                                                                                                              |
|                        |        | - key: url_handle, value: URL handle (string)                                                                                                                                                         |
|                        |        | - key: url, value: full URL (string)                                                                                                                                                                  |
|                        |        | - key: score, value: a score that used for ranking the search suggestions (float)                                                                                                                     |
| filters                | array  | Array with information about filters. Each object has the following properties:                                                                                                                       |
|                        |        | * filter â€“ filter object. Has the following properties:                                                                                                                                               |
|                        |        | * count â€“ total count of products with this parameters (number)                                                                                                                                       |
|                        |        | * values â€“ array of values (object). Has the following properties:                                                                                                                                    |
|                        |        | * value â€“ value label. (string)                                                                                                                                                                       |
|                        |        | * count â€“ cont of products with this parameter (number)                                                                                                                                               |
|                        |        | * ranges - an object with the following properties:                                                                                                                                                   |
|                        |        | - key: min, value: the minimum value of product (string)                                                                                                                                              |
|                        |        | - key: max, value: the maximum value of product (string)                                                                                                                                              |
| html                   | string | HTML-code of the block with products. The template is customized in the <%= config[:service_name] %> personal account.                                                                                |
| price_range            | object | Min and max price of products. Has the following properties:                                                                                                                                          |
|                        |        | * min â€“ min price (number)                                                                                                                                                                            |
|                        |        | * max â€“ max price (number)                                                                                                                                                                            |
| products               | array  | Array with information about products. Each object has the following properties:                                                                                                                      |
|                        |        | * description â€“ product description (string)                                                                                                                                                          |
|                        |        | * url â€“ absolute product URL (string)                                                                                                                                                                 |
|                        |        | * url_handle â€“ relative product URL (string)                                                                                                                                                          |
|                        |        | * picture â€“ product's picture URL in the <%= config[:service_name] %> storage (string)                                                                                                                |
|                        |        | * name â€“ product name (string)                                                                                                                                                                        |
|                        |        | * price â€“ product price (number / int)                                                                                                                                                                |
|                        |        | * price_full â€“ product price (number / float)                                                                                                                                                         |
|                        |        | * price_formatted â€“ product price with currency (string)                                                                                                                                              |
|                        |        | * price_full_formatted â€“ product price with currency (string)                                                                                                                                         |
|                        |        | * image_url - absolute product's picture URL in the <%= config[:service_name] %> storage (string)                                                                                                     |
|                        |        | * image_url_handle - relative product's picture URL in the <%= config[:service_name] %> storage (string)                                                                                              |
|                        |        | * image_url_resized - product image resizes url (array)                                                                                                                                               |
|                        |        | * currency â€“ product currency (string, corresponds to the currency of the personal account in <%= config[:service_name] %>, or a custom value specified in the shop settings in the personal account) |
|                        |        | * id â€“ product ID (string)                                                                                                                                                                            |
|                        |        | * old_price â€“ product old price (number / int, default - 0)                                                                                                                                           |
|                        |        | * old_price_full â€“ product old price (number / float)                                                                                                                                                 |
|                        |        | * old_price_formatted â€“ product old price with currency (string)                                                                                                                                      |
|                        |        | * old_price_full_formatted â€“ product old price with currency (string)                                                                                                                                 |
|                        |        | * group_id - id of the group with aggregated products (string)                                                                                                                                        |
|                        |        | Additional properties. If a parameter "extended" is passed in the request                                                                                                                             |
|                        |        | * categories â€“ product categories (array). Has the following properties:                                                                                                                              |
|                        |        | * id â€“ category id (string)                                                                                                                                                                           |
|                        |        | * name â€“ category name (string)                                                                                                                                                                       |
|                        |        | * parent_id â€“ parent category id (string)                                                                                                                                                             |
|                        |        | * url - category url                                                                                                                                                                                  |
|                        |        | * category_ids - product categories ids (array).                                                                                                                                                      |                                                                                                                                                                 |
| search_query_redirects | array  | Array with information about redirects. Each object has the following properties:                                                                                                                     |
|                        |        | * query â€“ search query (string)                                                                                                                                                                       |
|                        |        | * redirect_link â€“ Url for redirect (string)                                                                                                                                                           |
|                        |        | * deep_link â€“ Url for mobile apps (string)                                                                                                                                                            |
| products_total         | number | Total count of products                                                                                                                                                                               |
| book_author            | array  | Reserved                                                                                                                                                                                              |
| book_editor            | array  | Reserved                                                                                                                                                                                              |
| book_publisher         | array  | Reserved                                                                                                                                                                                              |
| book_series            | array  | Reserved                                                                                                                                                                                              |
| book_illustrator       | array  | Reserved                                                                                                                                                                                              |
| book_isbn              | array  | Reserved                                                                                                                                                                                              |
| book_isbn_vars         | array  | Reserved                                                                                                                                                                                              |

<aside class="notice">
Fields price_range, price_ranges, and price_median ignore products with a price of zero during aggregation.

For example, if the product prices are: 0, 10, and 100, the API response will return a minimum price of 10 instead of 0.
</aside>

## Full search

```javascript
<%= config[:js_sdk_name] %>("search", {search_query: "To be or not to be", page: 2, limit: 15, brands: ["Alas", "poor", "Yorick"], categories: [1, 146, 100500], filters: {'key':['value'], 'key':['value']}, merchants: ['merchant1', 'merchant2'],fashion_sizes:['L','XXL'], sort_by: "price", order: "asc"}, function(response) {
  // the functionality of rendering a block of full search
}, function(error) {
  // when something went wrong
});
```
```swift
// Basic full search
sdk.search(query: "iphone") { searchResult in
  print("Full search callback")
}

// Full search with additional parameters
sdk.search(query: "laptop", limit: nil, offset: nil, categoryLimit: nil, categories: nil, extended: nil, sortBy: nil, sortDir: nil, locations: nil, brands: nil, filters: nil, priceMin: nil, priceMax: nil, colors: nil, exclude: nil, fashion_sizes: nil) { searchResult in
  print("Full search callback")
}

/**
Search for merchants in locations.

To exclude merchants from the search results, use `excludedMerchants`.

excludedMerchants - an array of merchants to be excluded from the search results.

locations - locations where the search for merchants occurs.
**/

sdk?.search(
  query: "search-query",
  locations: "location",
  excludedMerchants: ["excluded-merchant"]
) { result in
    switch result {
    case .success(let response):
      print(response.productsTotal)
    case .failure(let error):
      print(error.description)
  }
}

sdk?.suggest(
  query: "search-query",
  locations: "location",
  excludedMerchants: ["excluded-merchant"]
) { result in
    switch result {
    case .success(let response):
      print(response.productsTotal)
    case .failure(let error):
      print(error.description)
  }


/**
Brand exclusion

To exclude brands from the search results, use `excludedBrands`.

excludedBrands â€“ an array of brand names that should be excluded from search results.

**/

sdk?.search(
    query: "powder bronzer",
    excludedBrands: ["dior", "estee lauder"]
) { result in
    switch result {
    case .success(let response):
        print(response.productsTotal)
    case .failure(let error):
        print(error.description)
    }
}

sdk?.suggest(
    query: "powder bronzer",
    excludedBrands: ["dior", "estee lauder"]
) { result in
    switch result {
    case .success(let response):
        print(response.productsTotal)
    case .failure(let error):
        print(error.description)
    }
}
```
```kotlin
// Search with locations
val params = SearchParams()
params.put(SearchParams.Parameter.LOCATIONS, "location")

//Additional filters
val filters = SearchParams.SearchFilters()
filters.put("voltage", arrayOf("11.1", "14.8"))
params.put(SearchParams.Parameter.FILTERS, filters)
//Disable clarification search
params.put(SearchParams.Parameter.NO_CLARIFICATION, true)

// Support for FASHION_SIZES filter
filters.put("fashion_sizes", arrayOf("S", "M", "L"))
params.put(SearchParams.Parameter.FASHION_SIZES, filters)

//Full search
sdk.searchManager.searchFull("SEARCH_QUERY", params, { searchFullResponse ->
    Log.i(TAG, "Search full response: $searchFullResponse")
})

/**

 Full search with brand exclusion

query - search query value
searchParams - additional search parameters
EXCLUDED_BRANDS - a comma-separated list of brands to be excluded
onSearchFull - callback that is triggered when the full search is completed

 **/

sdk.searchManager.searchFull(
  "powder bronzer",
  searchParams = SearchParams()
    .put(SearchParams.Parameter.EXCLUDED_BRANDS, listOf("dior", "estee lauder").joinToString(",")),
  onSearchFull = {
    Log.d("FULL SEARCH EXCLUDE BRANDS", it.productsTotal.toString())
  }
)

```

```java
//Full search
SearchParams params = new SearchParams();
params.put(SearchParams.Parameter.LOCATIONS, "location");

//Additional filters
SearchParams.SearchFilters filters = new SearchParams.SearchFilters();
filters.put("voltage", new String[] {"11.1", "14.8"});
params.put(SearchParams.Parameter.FILTERS, filters);

//Disable clarification search
params.put(SearchParams.Parameter.NO_CLARIFICATION, true);
<%= config[:android_sdk_package_name]%>.search("SEARCH_QUERY", SearchParams.TYPE.FULL, params, new Api.OnApiCallbackListener() {
    @Override
    public void onSuccess(JSONObject response) {
        Log.i(TAG, "Search response: " + response.toString());
    }
});
```

```jsx
const type = 'full_search';
let search_query = 'your_search_text';
sdk.search({
  type,
  search_query,
  // other params
})
  .then((res) => {
    console.log(res);
  })
  .catch((error) => {
    console.log(error);
  });

//Full search with additional parameters filters_search_by is fully supported

sdk.search({type: 'full_search', search_query: 'string', filters_search_by: 'popularity'});

 LOG  Request: <%= config[:api] %>
{
  "headers": {"Content-Type": "application/x-www-form-urlencoded", "User-Agent": "ReactNative Android SDK v1.6.34"},
  "method": "GET",
  "params": {"did": "e0747b709b5b6467", "filters_search_by": "popularity", "seance": "MC44NjAwMD",
  "search_query": "string", "shop_id": "357382bf66ac0ce2f1722677c59511", "sid": "MC44NjAwMD", "stream": "android",
  "type": "full_search"}
}

```


### HTTP Request

`GET https://<%= config[:api_endpoint] %>/search`

### Query Parameters

| Parameter           | Required | Description                                                                                                                                               |
|---------------------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| did                 | true     | Device ID. You get it from `init` method in SDK                                                                                                           |
| shop_id             | true     | Your API key                                                                                                                                              |
| sid                 | true     | Temporary user session ID                                                                                                                                 |
| type                | true     | In this case: "full_search"                                                                                                                               |
| search_query        | true     | Search query                                                                                                                                              |
| limit               | false    | Limit of results                                                                                                                                          |
| offset              | false    | Offset of results                                                                                                                                         |
| category_limit      | false    | How many categories for sidebar filter to return                                                                                                          |
| categories          | false    | Comma separated list of categories to filter                                                                                                              |
| extended            | false    | It's better to use `true` for full search results                                                                                                         |
| sort_by             | false    | Sort by parameter: `popular`, `price`, `discount`, `sales_rate`, `date`, `price_margin`, `rating`, `relevance`                                            |
| order               | false    | Sort direction: `asc` or `desc` (default)                                                                                                                 |
| locations           | false    | Comma separated list of locations IDs                                                                                                                     |
| brands              | false    | Comma separated list of brands to filter                                                                                                                  |
| filters             | false    | Optional escaped JSON string with filter parameters. For example: `{"bluetooth":["yes"],"offers":["15% cashback"],"weight":["1.6"]}`                      |
| price_min           | false    | Min price                                                                                                                                                 |
| price_max           | false    | Max price                                                                                                                                                 |
| colors              | false    | Comma separated list of colors                                                                                                                            |
| fashion_sizes       | false    | Comma separated list of sizes                                                                                                                             |
| exclude             | false    | Comma separated list of products IDs to exclude from search results                                                                                       |
| email               | false    | It's only for S2S integration, when service doesn't have user's session. Mobile SDK doesn't use it                                                        |
| no_clarification    | false    | Disable clarified search (true, false, default: false). Don't use it. God mode only                                                                       |
| merchants           | false    | Comma separated list of merchants                                                                                                                         |
| excluded_merchants* | false    | A comma-separated list of merchants. Products from these merchants will be excluded from the search results                                               |
| filters_search_by   | false    | Available options for filter: name, quantity, popularity.If this parameter in query global settings from dashboard are ignored                            |
| brand_limit         | false    | This parameter allows limiting the number of brands aggregated in the response. The default limit is 1000                                                 |
| collapse            | false    | When set to `false`, products with the same `group_id` will not be collapsed into a single entry and will appear as separate items in the search results. |
| excluded_brands*    | false    | A list of brands in lowercase, separated by commas                                                                                                        |

<aside class="warning">

<p></p>
<p>* <code>excluded_merchants</code></p>
<p>The <code>excluded_merchants</code> parameter works only in conjunction with the <code>merchants</code> parameter within the <code>locations</code> field.</p>
<p>Note that if a product is associated with multiple merchants, the list of merchants in the <code>excluded_merchants</code> parameter must precisely match the list of merchants for that product. Otherwise, the parameter will not work.</p>
<p>The connection between the <code>merchants</code> and <code>excluded_merchants</code> parameters exists because a whitelist of merchants is created based on the <code>merchants</code> parameter within the <code>locations</code> field.</p>
<p>The whitelist of merchants is populated by the content of the <code>merchants</code> parameter. If this parameter is not provided, all merchants for the product will be included in the whitelist by default.</p>
<p>The <code>excluded_merchants</code> parameter then excludes merchants from this whitelist.</p>

<p></p>
<p>When uploading a product, the JSON must include the <code>brand</code> field.</p>
<p>On the backend, the value from the <code>brand</code> field is automatically converted to lowercase using <code>brand_downcase</code>.</p>
<p>Therefore, brands in <code>excluded_brands</code> must be written in lowercase.</p>
<p>Be aware that brand exclusion will not work if the <code>brand</code> field was not provided in the JSON when uploading the product.</p>

</aside>

#### Sorting parameters in full search

The `sort_by` parameter defines how the search results are ordered. Below are the supported values and their descriptions:

| Value          | Description                                                                                                                                                                                         |
|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `popular`      | Sorts products based on their overall popularity. This ranking is influenced by internal metrics such as click-through rates, conversion rates, and user behavior. It is the default sorting method |
| `price`        | Sorts products by price                                                                                                                                                                             |
| `discount`     | Sorts products by the size of their discount                                                                                                                                                        |
| `sales_rate`   | Sorts by the rate at which products are sold. Higher sales velocity items are prioritized                                                                                                           |
| `date`         | Sorts products by their addition date                                                                                                                                                               |
| `price_margin` | Sorts by the product's profit margin                                                                                                                                                                |
| `rating`       | Sorts by user rating, with higher-rated products appearing first                                                                                                                                    |
| `relevance`    | Sorts by how closely a product matches the search query. It prioritizes content relevance and textual matching, and **does not** consider sales metrics or price                                    |

### API response

| Name               | Type             | Description                                                                                  |
|--------------------|------------------|----------------------------------------------------------------------------------------------|
| search_query       | string           | The search query string.                                                                     |
| collections        | array            | List of collections to which the product belongs.                                            |
| products_total     | integer          | Total number of products matching the search query.                                          |
| products           | array of objects | Array of products matching the search query. Includes the following fields:                  |
|                    |                  | * `name` (string)                                                                            |
|                    |                  | * `url` (string)                                                                             |
|                    |                  | * `description` (string)                                                                     |
|                    |                  | * `category_ids` (array of integers)                                                         |
|                    |                  | * `brand` (string)                                                                           |
|                    |                  | * `fashion_sizes` (array of strings)                                                         |
|                    |                  | * `fashion_feature` (string)                                                                 |
|                    |                  | * `fashion_gender` (string)                                                                  |
|                    |                  | * `fashion_wear_type` (string)                                                               |
|                    |                  | * `sales_rate` (integer)                                                                     |
|                    |                  | * `relative_sales_rate` (float)                                                              |
|                    |                  | * `price_formatted` (string)                                                                 |
|                    |                  | * `price_full_formatted` (string)                                                            |
|                    |                  | * `picture` (string)                                                                         |
|                    |                  | * `image_url` (string)                                                                       |
|                    |                  | * `image_url_handle` (string)                                                                |
|                    |                  | * `image_url_resized` (object)                                                               |
|                    |                  | * `url_handle`(string)                                                                       |
|                    |                  | * `group_id`(string)                                                                         |
|                    |                  | * `_id` (string)                                                                             |
| categories         | array of objects | List of product categories. Includes the following fields:                                   |
|                    |                  | * `id` (string)                                                                              |
|                    |                  | * `url` (string)                                                                             |
|                    |                  | * `name` (string)                                                                            |
|                    |                  | * `parent` (string)                                                                          |
|                    |                  | * `url_handle` (string)                                                                      |
|                    |                  | * `count` (integer)                                                                          |
| price_range        | object           | Price range for the found products. Includes the following fields:                           |
|                    |                  | * `min` (float)                                                                              |
|                    |                  | * `max` (float)                                                                              |
| price_ranges       | array of objects | Array of price ranges that contain products. Includes the following fields:                  |
|                    |                  | * `from` (integer)                                                                           |
|                    |                  | * `count` (integer)                                                                          |
| price_median       | integer          | Median price of all products returned by the search                                          |
| brands             | array of objects | List of product brands that match the search query. Includes the following fields:           |
|                    |                  | * `name` (string)                                                                            |
|                    |                  | * `count` (integer)                                                                          |
| industrial_filters | object           | Filters for products based on size and other characteristics. Includes the following fields: |
|                    |                  | * `fashion_sizes` (array of objects)                                                         |
|                    |                  | * `size` (integer)                                                                           |
|                    |                  | * `count` (integer)                                                                          |
| html               | string           | HTML markup for displaying products on the page.                                             |
| clarification      | boolean          | Flag indicating if query clarification is needed (e.g., if no exact matches are found).      |
| requests_count     | integer          | The number of requests made to the API within the session.                                   |


<aside class="notice">
Fields price_range, price_ranges, and price_median ignore products with a price of zero during aggregation.

For example, if the product prices are: 0, 10, and 100, the API response will return a minimum price of 10 instead of 0.
</aside>

### Descriptions of Nested Fields in the API Response

 **products**

| Field                | Type             | Description                                      |
|----------------------|------------------|--------------------------------------------------|
| name                 | string           | Product name                                     |
| url                  | string           | Absolute product URL                             |
| description          | string           | Short product description                        |
| category_ids         | array of strings | Array of associated category IDs                 |
| brand                | string           | Product brand name                               |
| sales_rate           | integer          | Product's absolute popularity score              |
| relative_sales_rate  | float            | Product's relative popularity                    |
| price_formatted      | string           | Display price with currency symbol               |
| price_full_formatted | string           | Full (non-discounted) price with currency symbol |
| picture              | string (URL)     | Product thumbnail image URL                      |
| image_url            | string (URL)     | Full-size image URL                              |
| image_url_handle     | string           | Relative path to product image                   |
| image_url_resized    | object           | Object with resized images                       |
| url_handle           | string           | Relative product URL                             |
| group_id             | string           | ID of product group (aggregated variations)      |
| _id                  | string           | Internal ID                                      |

**categories**

| Field      | Type    | Description                         |
|------------|---------|-------------------------------------|
| id         | string  | Category ID                         |
| name       | string  | Category name                       |
| url        | string  | Full URL to category                |
| parent     | string  | ID of the parent category           |
| url_handle | string  | Relative URL path to the category   |
| count      | integer | Number of products in this category |

**brands**

| Field   | Type     | Description                           |
|---------|----------|---------------------------------------|
| name    | string   | Brand name                            |
| count   | integer  | Number of products for this brand     |

**price_range**

| Field | Type   | Description              |
|-------|--------|--------------------------|
| min   | float  | Minimum price in results |
| max   | float  | Maximum price in results |

**price_ranges**

| Field | Type    | Description                                        |
|-------|---------|----------------------------------------------------|
| from  | integer | Start of price range                               |
| count | integer | Number of products in this price range             |


## Search queries with zero results

This method returns a list of queries which return zero results and number of usages of this queries during previous 2 weeks.

For server-to-server integration only.

### HTTP Request

`GET https://<%= config[:api_endpoint] %>/search/no_result_queries`

```shell
curl https://<%= config[:api_endpoint] %>/search/no_result_queries?shop_id=...&shop_secret=...
```

```javascript
// No implementation. See CURL
```

```swift
// No implementation. See CURL
```

```kotlin
// No implementation. See CURL
```

```java
// No implementation. See CURL
```

> Response example

```json
[
  {
    "query": "iphone 4s",
    "quantity": 3844
  },
  {
    "contact_type": "covfefe",
    "quantity": 384491
  }
]
```

### Parameters

| Parameter   | Type   | Required | Description    |
|-------------|--------|----------|----------------|
| shop_id     | String | true     | Your API key   |
| shop_secret | String | true     | Secret API key |

### Response properties

| Parameter | Type    | Description                           |
|-----------|---------|---------------------------------------|
| query     | String  | Search query value                    |
|  quantity | Integer | Number of query usages during 2 weeks |





