# CRM

This section collects CRM-related methods.

## Bulk search by attribute

```shell
curl -i -X POST -H "Content-Type: application/json" --data-binary "@data.json" https://<%= config[:api_endpoint] %>/crm/search/bulk

# data.json
{
  "shop_id": "1234567890",
  "shop_secret": "0987654321",
  "by": "loyalty_id",
  "ids": ["L01", "L02"]
}
```

```javascript
// No implementation is needed in JS SDK
```

```swift
// No implementation is needed in iOS SDK
```

```kotlin
// No implementation is needed in Android SDK
```

> Response structure

```json
[
  {
    "email": "email@example.com",
    "external_id": "1",
    "phone": "11111111111",
    "first_name": null,
    "last_name": null,
    "gender": null,
    "age": null,
    "birthday": null,
    "location": null,
    "email_bulk": true,
    "email_chain": true,
    "email_transactional": true,
    "web_push": true,
    "mobile_push": null,
    "sms_bulk": null,
    "sms_chain": null,
    "sms_transactional": null,
    "loyalty_id": "L01",
    "loyalty_location": null,
    "loyalty_status": null,
    "loyalty_bonuses": 300,
    "loyalty_bonuses_to_next_level": null,
    "created_date": null,
    "device": null
  },
  {
    "email": "email2@example.com",
    "external_id": "1",
    "phone": null,
    "first_name": "Thomas",
    "last_name": "Anderson",
    "gender": "m",
    "age": null,
    "birthday": "1971-09-11",
    "location": null,
    "email_bulk": true,
    "email_chain": true,
    "email_transactional": true,
    "web_push": true,
    "mobile_push": null,
    "sms_bulk": null,
    "sms_chain": null,
    "sms_transactional": null,
    "loyalty_id": "L02",
    "loyalty_location": null,
    "loyalty_status": null,
    "loyalty_bonuses": 0,
    "loyalty_bonuses_to_next_level": null,
    "created_date": null,
    "device": null

  }
]
```

Methods tries to find a collection of users by list of identifiers. Identifiers can be: email, phone, loyalty_id.

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- | -------  | -----------
shop_id | String | true | Your API key
shop_secret | String | true | Your API secret key
by | String | true | Type of identifier. See below.
ids | Array | true | Array of identifiers

### Supported identifiers

Identifier | Description | Restrictions
--------- | ------- | -------
loyalty_id | Loyalty ID | No restrictions
birthday | Birthday | Format: `YYYY-MM-DD`. Processing only 5 valid dates. Other dates are skipped
