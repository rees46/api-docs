# Triggers

Trigger subscription methods that require explicit user action.

## Price drop

```shell
# Subscribing
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/subscribe_for_product_price' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_id":"11111",
    "price": "1000"
}'

# Unsubscribing from specific products
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/unsubscribe_from_product_price' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_ids":"11111, 22222, 333333"
}'

# Unsubscribing from all products
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/unsubscribe_from_product_price' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_ids":""
}'
```

```javascript
// Subscribing
<%= config[:js_sdk_name] %>('subscribe_trigger', 'product_price_decrease', {email: 'John.Doe@store.com', item: '3323', price: 160});

// Unsubscribing from specific products
<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_price_decrease', {email: 'John.Doe@store.com', item_ids: [3323, 100500, 'ABCDEF']});

// Unsubscribing from all products
<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_price_decrease', {email: 'John.Doe@store.com', item_ids: []});
```

```swift
// No code implementation
```

```java
// No code implementation
```

This feature gives the customers an option to choose if they want to receive a notification when the price of the item they want has dropped.

### JS SDK syntax
|Syntax|
| ------------ |
|<%= config[:js_sdk_name] %>('subscribe_trigger', 'product_price_decrease', params);|

### JS SDK Parameters
|Parameter|Type|Requirement|Description|
| ------------ | ------------ | ------------ | ----------- |
|email|string|required|Subscriber Email|
|item|number/string|required|The ID of the product to which the user will be subscribed|
|price|number/string|required|The current product price|

### JS SDK syntax
|Syntax|
| ------------ |
|<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_price_decrease', params);|

### JS SDK Parameters
| Parameter    | Type         | Requirement  | Description                                                                                             |
| ------------ | ------------ | ------------ | ------------------------------------------------------------------------------------------------------- |
| email        | string       | required     | Subscriber Email                                                                                        |
| item         | string       | required     | Product ID                                                                                              |
| item_ids     | array        | required     | The IDs of the products from which the user will unsubscribe, or an empty array for full unsubscription |

## Back in Stock

```shell
# Subscribing
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/subscribe_for_product_available' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_id":"11111",
    "properties[fashion_size]":"XL"
}'

# Unsubscribing from specific products
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/unsubscribe_from_product_available' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_ids":"11111, 22222, 333333"
}'

# Unsubscribing from all products
curl --location --request POST 'https://<%= config[:api_endpoint] %>/subscriptions/unsubscribe_from_product_available' \
--header 'Content-Type: application/json' \
--data-raw '{
    "shop_id":"SHOP_ID",
    "email":"EMAIL",
    "item_ids":""
}'
```

```javascript
// Subscribing
<%= config[:js_sdk_name] %>('subscribe_trigger', 'product_available', {email: 'John.Doe@store.com', item: '3323', properties: {fashion_size: "XL"}});

// Unsubscribing from specific products
<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_available', {email: 'John.Doe@store.com', item_ids: [3323, 100500, 'ABCDEF']});

// Unsubscribing from all products
<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_available', {email: 'John.Doe@store.com', item_ids: []});
```

```swift
// No code implementation
```

```java
// No code implementation
```

This feature helps you recover sales lost due to out-of-stock items by giving your customers an option to choose if they want to receive a notification when the item they want is back in stock.

### JS SDK syntax
|Syntax|
| ------------ |
|<%= config[:js_sdk_name] %>('subscribe_trigger', 'product_available', params);|

### JS SDK Parameters
|Parameter|Type|Requirement|Description|
| ------------ | ------------ | ------------ | ----------- |
|email|string|required|Subscriber Email|
|item|number/string|required|The ID of the product to which the user will be subscribed|

### JS SDK syntax
|Syntax|
| ------------ |
|<%= config[:js_sdk_name] %>('unsubscribe_trigger', 'product_available', params);|

### JS SDK Parameters
| Parameter    | Type         | Requirement  | Description                                                                                             |
| ------------ | ------------ | ------------ | ------------------------------------------------------------------------------------------------------- |
| email        | string       | required     | Subscriber Email                                                                                        |
| item         | string       | required     | Product ID                                                                                              |
| properties   | object       | optional     | Product properties:                                                                                     |
| fashion_size | string       | optional     | Product size                                                                                            |
| item_ids     | array        | required     | The IDs of the products from which the user will unsubscribe, or an empty array for full unsubscription |

